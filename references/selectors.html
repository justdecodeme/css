<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">
  <link href="assets/css/prism.css" rel="stylesheet" />
  <title>Selectors</title>
  <style>
    * {
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    body {
      font-family: 'Roboto', sans-serif;
    }

    body>h1 {
      text-align: center;
      margin: 10px 0;
    }

    h2 {
      padding: 5px;
      font-size: 16px;
      background: rgba(0, 0, 0, 0.3);
    }

    h3 {
      background: grey;
      padding: 5px 10px;
      font-size: 14px;
      font-weight: normal;
      letter-spacing: 1px;
    }

    ul {
      /* background: lightgreen; */
    }

    .content {
      display: flex;
    }

    .css,
    .html,
    .output {
      background: #2d2d2d;
      width: 33.33%;
      border: 1px solid black;
    }

    .output {
      background: white;
    }

    pre[class*="language-"] {
      padding: 0 0 0 10px;
      margin: 0;
    }
  </style>
</head>

<body>
  <h1>CSS Selectors</h1>

  <!-- all listing is handled by json and js -->
  <ul id="selectorsListing"></ul>

  <script>
    function htmlencode(str) {
      return str.replace(/[&<>"']/g, function ($0) {
        return "&" + {
          "&": "amp",
          "<": "lt",
          ">": "gt",
          '"': "quot",
          "'": "#39"
        } [$0] + ";";
      });
    }
    function titleCase(str) {
      // var splitStr = str.toLowerCase().split(' ');
      var splitStr = str.split(' ');
      for (var i = 0; i < splitStr.length; i++) {
          // You do not need to check if i is larger than splitStr length, as your for does that for you
          // Assign it back to the array
          splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     
      }
      // Directly return the joined string
      return splitStr.join(' '); 
    }

    var contentObj = {
      ////////////////////// universal 
      'universal': {
        'heading': `universal selector (*) - CSS2`,
        'css': `
* {
  color: red;
}
`,
        'html': `
<h1>Heading</h1>
<p>Paragraph</p>
<a href="#">Link</a>           
  `
      },
      ////////////////////// tag 
      'tag': {
        'heading': `tag selector (E) - CSS1`,
        'css': `
p {
  background-color: yellow;
}
`,
        'html': `
<h1>Heading</h1>
<p>Paragraph</p>
<a href="#">Link</a>  
`
      },
      ////////////////////// multiple 
      'multiple': {
        'heading': `multiple selector (E1, E2) - CSS1`,
        'css': `
h1, a {
  background-color: yellow;
}
`,
        'html': `
<h1>Heading</h1>
<p>Paragraph</p>
<a href="#">Link</a>           
`
      },      
      ////////////////////// class 
      'class': {
        'heading': `class selector (.class-name) - CSS1`,
        'css': `
.highlight {
  background-color: yellow;
}
`,
        'html': `
<h1 class="highlight">Heading</h1>
<p class="highlight">Paragraph</p>
<a href="#">Link</a>           
`
      },
      ////////////////////// id 
      'id': {
        'heading': `id selector (#idName) - CSS1`,
        'css': `
#highlight {
  background-color: yellow;
}
`,
        'html': `
<h1 id="highlight">Heading</h1>
<p class="highlight">Paragraph</p>
<a href="#">Link</a>           
`
      },      
      ////////////////////// descendant 
      'descendant': {
        'heading': `descendant selector (E F) - CSS1`,
        'css': `
div span {
  background-color: yellow;
}
`,
        'html': `
<div>
  <span>span 1</span>
  <p>paragraph <span>span 2</span></p>
</div>           
`
      },
      ////////////////////// child 
      'child': {
        'heading': `child selector (E > F) - CSS2`,
        'css': `
div > span {
  background-color: yellow;
}
`,
        'html': `
<div>
  <span>span 1</span>
  <p>paragraph <span>span 2</span></p>
</div>            
`
      },
      ////////////////////// adjacent sibling 
      'adjacent': {
        'heading': `adjacent sibling selector (E + F) - CSS2`,
        'css': `
p + span {
  background-color: yellow;
}
`,
        'html': `
<div>
  <span>span 1</span>
  <p>paragraph <span>span 2</span></p>
  <span>span 3</span>
  <span>span 4</span>
</div>            
`
      },
      ////////////////////// sibling 
      'sibling': {
        'heading': `sibling selector (E ~ F) - CSS3`,
        'css': `
p ~ span {
  background-color: yellow;
}
`,
        'html': `
<div>
  <span>span 1</span>
  <p>paragraph <span>span 2</span></p>
  <span>span 3</span>
  <span>span 4</span>
</div>            
`
      },
      ////////////////////// [attribute] 
      'attribute1': {
        'heading': `[attribute] selector - CSS2`,
        'css': `
[class] {
  background-color: yellow;
}
`,
        'html': `
<p class="yellow">Paragraph 1</p>          
<p class="green">Paragraph 2</p>          
<p>Paragraph 3</p>          
<p class="green">Paragraph 4</p>          
<input type="text" placeholder="First Name">           
<input type="text" placeholder="Last Name">           
<input type="email" placeholder="example@gmail.com">           
<input type="password" placeholder="password">           
`
      },
      ////////////////////// [attribute=value]
      'attribute2': {
        'heading': `[attribute=value] slector - CSS2`,
        'css': `
[class=yellow] {
  background-color: yellow;
}
`,
        'html': `
<p class="info-big yellow">Paragraph 1</p>          
<p class="green">Paragraph 2</p>          
<p class="yellow">Paragraph 3</p>          
<p class="green">Paragraph 4</p>       
`
      },
      ////////////////////// [attribute~=value]
      'attribute3': {
        'heading': `[attribute~=value] slector - CSS2`,
        'css': `
[class~=yellow] {
  background-color: yellow;
}
`,
        'html': `
<p class="info-big yellow">Paragraph 1</p>          
<p class="info-small green">Paragraph 2</p>          
<p class="info-big-success yellow">Paragraph 3</p>          
<p class="info-small-success green">Paragraph 4</p>          
`
      },
      ////////////////////// [attribute^=value]
      'attribute4': {
        'heading': `[attribute^=value] slector - CSS2`,
        'css': `
[class^=info] {
  background-color: yellow;
}
`,
        'html': `
<p class="alert-big">Paragraph 1</p>          
<p class="info-small">Paragraph 2</p>          
<p class="alert-big-success">Paragraph 3</p>          
<p class="info-small-success">Paragraph 4</p>          
`
      },
      ////////////////////// [attribute$=value]
      'attribute5': {
        'heading': `[attribute$=value] slector - CSS2`,
        'css': `
[class$=success] {
  background-color: yellow;
}
`,
        'html': `
<p class="alert-big">Paragraph 1</p>          
<p class="info-small">Paragraph 2</p>          
<p class="info-big-success">Paragraph 3</p>          
<p class="alert-small-success">Paragraph 4</p>          
`
      },
      ////////////////////// [attribute*=value]
      'attribute5': {
        'heading': `[attribute*=value] slector - CSS2`,
        'css': `
[class*=small] {
  background-color: yellow;
}
`,
        'html': `
<p class="alert-big">Paragraph 1</p>          
<p class="info-small">Paragraph 2</p>          
<p class="info-small-success">Paragraph 3</p>          
<p class="small-success">Paragraph 4</p>          
`
      },
    }
    var ul = document.getElementById('selectorsListing');
    var inner = '';

    /************************/
    /* loop for updating css and html - NORMAL order*/
    /************************/
    // for (var key in contentObj) {
    //   if (contentObj.hasOwnProperty(key)) {
    //     inner +=
    //       `
    //       <li id="${key}">
    //         <h2>${contentObj[key]['heading']}</h2>
    //         <div class="content">
    //           <div class="css">
    //             <pre><code class="language-css">${contentObj[key]['css']}</code></pre>              
    //           </div>
    //           <div class="html">
    //             <pre><code class="language-html">${htmlencode(contentObj[key]['html'])}</code></pre>               
    //             </div>
    //           <div class="output">
    //             <iframe frameborder="0"></iframe>
    //           </div>
    //         </div>       
    //       </li> 
    //     `;
    //   }
    // }
    // ul.innerHTML = inner;

    /************************/
    /* loop for updating css and html - REVERSE order*/
    /************************/
    // f is a function that has the obj as 'this' and the property name as first parameter
    function reverseForIn(obj, f) {
      var arr = [];
      for (var key in obj) {
        // add hasOwnPropertyCheck if needed
        arr.push(key);
      }
      for (var i = arr.length - 1; i >= 0; i--) {
        f.call(obj, arr[i]);
      }
      ul.innerHTML = inner;
    }
    //usage
    reverseForIn(contentObj, function (key) {
      inner +=
        `
          <li id="${key}">
            <h2>${titleCase(this[key]['heading'])}</h2>
            <div class="content">
              <div class="css">
                <pre><code class="language-css">${this[key]['css']}</code></pre>              
              </div>
              <div class="html">
                <pre><code class="language-html">${htmlencode(this[key]['html'])}</code></pre>               
                </div>
              <div class="output">
                <iframe frameborder="0"></iframe>
              </div>
            </div>       
          </li> 
        `;
    });

    /************************/
    /* loop for updating iframe */
    /************************/
    for (var key in contentObj) {
      if (contentObj.hasOwnProperty(key)) {

        var iframe = document.getElementById(key).querySelector('iframe');
        var frameDoc = iframe.document;
        if (iframe.contentWindow)
          frameDoc = iframe.contentWindow.document; // IE
        // Write into iframe
        frameDoc.open();
        frameDoc.writeln(
          "<style>" +
          contentObj[key]['css'] +
          "</style>" +
          contentObj[key]['html']
        );
        frameDoc.close();
      }
    }
  </script>

  <script src="assets/js/prism.js"></script>
</body>

</html>